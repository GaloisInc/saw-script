<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">
span.lineno { color: white; background: #aaaaaa; border-right: solid white 12px }
span.nottickedoff { background: yellow}
span.istickedoff { background: white }
span.tickonlyfalse { margin: -1px; border: 1px solid #f20913; background: #f20913 }
span.tickonlytrue  { margin: -1px; border: 1px solid #60de51; background: #60de51 }
span.funcount { font-size: small; color: orange; z-index: 2; position: absolute; right: 20 }
span.decl { font-weight: bold }
span.spaces    { background: white }
</style>
</head>
<body>
<pre>
<span class="decl"><span class="nottickedoff">never executed</span> <span class="tickonlytrue">always true</span> <span class="tickonlyfalse">always false</span></span>
</pre>
<pre>
<span class="lineno">    1 </span>{-# LANGUAGE FlexibleContexts #-}
<span class="lineno">    2 </span>{-# LANGUAGE OverloadedStrings #-}
<span class="lineno">    3 </span>{-# LANGUAGE QuasiQuotes #-}
<span class="lineno">    4 </span>{-# LANGUAGE RecordWildCards #-}
<span class="lineno">    5 </span>
<span class="lineno">    6 </span>{- |
<span class="lineno">    7 </span>Module      : SAWCoreCoq.SpecialTreatment
<span class="lineno">    8 </span>Copyright   : Galois, Inc. 2018
<span class="lineno">    9 </span>License     : BSD3
<span class="lineno">   10 </span>Maintainer  : atomb@galois.com
<span class="lineno">   11 </span>Stability   : experimental
<span class="lineno">   12 </span>Portability : portable
<span class="lineno">   13 </span>-}
<span class="lineno">   14 </span>
<span class="lineno">   15 </span>module SAWCoreCoq.SpecialTreatment where
<span class="lineno">   16 </span>
<span class="lineno">   17 </span>import           Control.Lens                       (_1, _2, over)
<span class="lineno">   18 </span>import           Control.Monad.Reader               (asks)
<span class="lineno">   19 </span>import           Data.Char                          (isAlphaNum)
<span class="lineno">   20 </span>import qualified Data.Map                           as Map
<span class="lineno">   21 </span>import           Data.Map                           (Map)
<span class="lineno">   22 </span>import           Data.String.Interpolate            (i)
<span class="lineno">   23 </span>import qualified Data.Text                          as Text
<span class="lineno">   24 </span>import           Prelude                            hiding (fail)
<span class="lineno">   25 </span>import           Text.Encoding.Z                    (zEncodeString)
<span class="lineno">   26 </span>
<span class="lineno">   27 </span>import qualified Language.Coq.AST                   as Coq
<span class="lineno">   28 </span>
<span class="lineno">   29 </span>import           SAWCore.Name
<span class="lineno">   30 </span>
<span class="lineno">   31 </span>import           SAWCoreCoq.Monad
<span class="lineno">   32 </span>
<span class="lineno">   33 </span>data SpecialTreatment = SpecialTreatment
<span class="lineno">   34 </span>  { <span class="nottickedoff"><span class="decl"><span class="nottickedoff">moduleRenaming</span></span></span>        :: Map ModuleName String
<span class="lineno">   35 </span>  , <span class="nottickedoff"><span class="decl"><span class="nottickedoff">identSpecialTreatment</span></span></span> :: Map ModuleName (Map String IdentSpecialTreatment)
<span class="lineno">   36 </span>  }
<span class="lineno">   37 </span>
<span class="lineno">   38 </span>-- | How to handle SAWCore identifiers at their definition sites.
<span class="lineno">   39 </span>data DefSiteTreatment
<span class="lineno">   40 </span>  = -- | Translate the identifier unchanged, and directly translate the assocated
<span class="lineno">   41 </span>    --   SAWCore declaration.
<span class="lineno">   42 </span>    DefPreserve
<span class="lineno">   43 </span>  | -- | Translate the identifier into the given Coq identifer,
<span class="lineno">   44 </span>    --   and otherwise directly translate the associated SAWCore declaration.
<span class="lineno">   45 </span>    DefRename Coq.Ident
<span class="lineno">   46 </span>  | -- | Replace the declaration of the identifier with the given text.
<span class="lineno">   47 </span>    DefReplace  String
<span class="lineno">   48 </span>    -- | Skip the declartion of the identifier altogether.
<span class="lineno">   49 </span>  | DefSkip
<span class="lineno">   50 </span>
<span class="lineno">   51 </span>-- | How to translate SAWCore identifiers at their use sites.
<span class="lineno">   52 </span>data UseSiteTreatment
<span class="lineno">   53 </span>  = -- | Translate the identifier unchanged
<span class="lineno">   54 </span>    UsePreserve
<span class="lineno">   55 </span>    -- | Rename the given identifier into the given (optionally qualified)
<span class="lineno">   56 </span>    --   Coq identifier.  The boolean value, if true, indicates that the
<span class="lineno">   57 </span>    --   identifier should be an &quot;explicit&quot; identifier with a leading \&quot;\@\&quot;
<span class="lineno">   58 </span>    --   symbol, which indicates to Coq that all implicit arguments should be
<span class="lineno">   59 </span>    --   treated as explicit.
<span class="lineno">   60 </span>  | UseRename (Maybe ModuleName) Coq.Ident Bool
<span class="lineno">   61 </span>    -- | Apply a macro function to the translations of the first @n@ SAWCore
<span class="lineno">   62 </span>    -- arguments of this identifier
<span class="lineno">   63 </span>  | UseMacro Int ([Coq.Term] -&gt; Coq.Term)
<span class="lineno">   64 </span>
<span class="lineno">   65 </span>data IdentSpecialTreatment = IdentSpecialTreatment
<span class="lineno">   66 </span>  { <span class="nottickedoff"><span class="decl"><span class="nottickedoff">atDefSite</span></span></span> :: DefSiteTreatment
<span class="lineno">   67 </span>  , <span class="istickedoff"><span class="decl"><span class="istickedoff">atUseSite</span></span></span> :: UseSiteTreatment
<span class="lineno">   68 </span>  }
<span class="lineno">   69 </span>
<span class="lineno">   70 </span>moduleRenamingMap :: Map ModuleName ModuleName
<span class="lineno">   71 </span><span class="decl"><span class="istickedoff">moduleRenamingMap = Map.fromList $</span>
<span class="lineno">   72 </span><span class="spaces">  </span><span class="istickedoff">over _1 (mkModuleName . (: [])) &lt;$&gt;</span>
<span class="lineno">   73 </span><span class="spaces">  </span><span class="istickedoff">over _2 (mkModuleName . (: [])) &lt;$&gt;</span>
<span class="lineno">   74 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Cryptol&quot;, &quot;CryptolPrimitivesForSAWCore&quot;)</span>
<span class="lineno">   75 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Prelude&quot;, <span class="nottickedoff">&quot;SAWCorePrelude&quot;</span>)</span>
<span class="lineno">   76 </span><span class="spaces">  </span><span class="istickedoff">]</span></span>
<span class="lineno">   77 </span>
<span class="lineno">   78 </span>translateModuleName :: ModuleName -&gt; ModuleName
<span class="lineno">   79 </span><span class="decl"><span class="istickedoff">translateModuleName mn =</span>
<span class="lineno">   80 </span><span class="spaces">  </span><span class="istickedoff">Map.findWithDefault <span class="nottickedoff">mn</span> mn moduleRenamingMap</span></span>
<span class="lineno">   81 </span>
<span class="lineno">   82 </span>findSpecialTreatment' ::
<span class="lineno">   83 </span>  TranslationConfigurationMonad r m =&gt;
<span class="lineno">   84 </span>  NameInfo -&gt; m IdentSpecialTreatment
<span class="lineno">   85 </span><span class="decl"><span class="nottickedoff">findSpecialTreatment' nmi =</span>
<span class="lineno">   86 </span><span class="spaces">  </span><span class="nottickedoff">case nmi of</span>
<span class="lineno">   87 </span><span class="spaces">    </span><span class="nottickedoff">ModuleIdentifier ident -&gt; findSpecialTreatment ident</span>
<span class="lineno">   88 </span><span class="spaces">    </span><span class="nottickedoff">ImportedName{} -&gt; pure $ IdentSpecialTreatment DefPreserve UsePreserve</span></span>
<span class="lineno">   89 </span>
<span class="lineno">   90 </span>findSpecialTreatment ::
<span class="lineno">   91 </span>  TranslationConfigurationMonad r m =&gt;
<span class="lineno">   92 </span>  Ident -&gt; m IdentSpecialTreatment
<span class="lineno">   93 </span><span class="decl"><span class="istickedoff">findSpecialTreatment ident = do</span>
<span class="lineno">   94 </span><span class="spaces">  </span><span class="istickedoff">configuration &lt;- asks <span class="nottickedoff">translationConfiguration</span></span>
<span class="lineno">   95 </span><span class="spaces">  </span><span class="istickedoff">let moduleMap =</span>
<span class="lineno">   96 </span><span class="spaces">        </span><span class="istickedoff">Map.findWithDefault <span class="nottickedoff">Map.empty</span> (identModule ident) (specialTreatmentMap <span class="nottickedoff">configuration</span>)</span>
<span class="lineno">   97 </span><span class="spaces">  </span><span class="istickedoff">let defaultTreatment =</span>
<span class="lineno">   98 </span><span class="spaces">        </span><span class="istickedoff">IdentSpecialTreatment</span>
<span class="lineno">   99 </span><span class="spaces">        </span><span class="istickedoff">{ atDefSite = <span class="nottickedoff">DefPreserve</span></span>
<span class="lineno">  100 </span><span class="spaces">        </span><span class="istickedoff">, atUseSite = UsePreserve</span>
<span class="lineno">  101 </span><span class="spaces">        </span><span class="istickedoff">}</span>
<span class="lineno">  102 </span><span class="spaces">  </span><span class="istickedoff">pure $ Map.findWithDefault defaultTreatment (identName ident) moduleMap</span></span>
<span class="lineno">  103 </span>
<span class="lineno">  104 </span>-- | Use `mapsTo` for identifiers whose definition has a matching definition
<span class="lineno">  105 </span>-- already on the Coq side.  As such, their definition can be skipped, and use
<span class="lineno">  106 </span>-- sites can be replaced by the appropriate call.
<span class="lineno">  107 </span>mapsTo :: ModuleName -&gt; Coq.Ident -&gt; IdentSpecialTreatment
<span class="lineno">  108 </span><span class="decl"><span class="istickedoff">mapsTo targetModule targetName = IdentSpecialTreatment</span>
<span class="lineno">  109 </span><span class="spaces">  </span><span class="istickedoff">{ atDefSite = <span class="nottickedoff">DefSkip</span></span>
<span class="lineno">  110 </span><span class="spaces">  </span><span class="istickedoff">, atUseSite = UseRename (Just targetModule) targetName False</span>
<span class="lineno">  111 </span><span class="spaces">  </span><span class="istickedoff">}</span></span>
<span class="lineno">  112 </span>
<span class="lineno">  113 </span>-- | Like 'mapsTo' but use an explicit variable reference so
<span class="lineno">  114 </span>-- that all implicit arguments must be provided.
<span class="lineno">  115 </span>mapsToExpl :: ModuleName -&gt; Coq.Ident -&gt; IdentSpecialTreatment
<span class="lineno">  116 </span><span class="decl"><span class="nottickedoff">mapsToExpl targetModule targetName = IdentSpecialTreatment</span>
<span class="lineno">  117 </span><span class="spaces">  </span><span class="nottickedoff">{ atDefSite = DefSkip</span>
<span class="lineno">  118 </span><span class="spaces">  </span><span class="nottickedoff">, atUseSite = UseRename (Just targetModule) targetName True</span>
<span class="lineno">  119 </span><span class="spaces">  </span><span class="nottickedoff">}</span></span>
<span class="lineno">  120 </span>
<span class="lineno">  121 </span>-- | Like 'mapsToExpl' but add an @n@th argument that is inferred by Coq
<span class="lineno">  122 </span>mapsToExplInferArg :: Coq.Ident -&gt; Int -&gt; IdentSpecialTreatment
<span class="lineno">  123 </span><span class="decl"><span class="nottickedoff">mapsToExplInferArg targetName argNum = IdentSpecialTreatment</span>
<span class="lineno">  124 </span><span class="spaces">  </span><span class="nottickedoff">{ atDefSite = DefSkip</span>
<span class="lineno">  125 </span><span class="spaces">  </span><span class="nottickedoff">, atUseSite = UseMacro argNum (\args -&gt;</span>
<span class="lineno">  126 </span><span class="spaces">                                  </span><span class="nottickedoff">Coq.App (Coq.ExplVar targetName)</span>
<span class="lineno">  127 </span><span class="spaces">                                  </span><span class="nottickedoff">(args ++ [Coq.Var &quot;_&quot;]))</span>
<span class="lineno">  128 </span><span class="spaces">  </span><span class="nottickedoff">}</span></span>
<span class="lineno">  129 </span>
<span class="lineno">  130 </span>-- | Use `realize` for axioms that can be realized, or for primitives that must
<span class="lineno">  131 </span>-- be realized. While some primitives can be written directly in a standalone
<span class="lineno">  132 </span>-- Coq module, some primitives depend on code from the extracted module, and are
<span class="lineno">  133 </span>-- depended upon by following code in the same module. Such primitives can
<span class="lineno">  134 </span>-- therefore *neither* be defined a priori, *nor* a posteriori, and must be
<span class="lineno">  135 </span>-- realized where they were originally declared.
<span class="lineno">  136 </span>realize :: String -&gt; IdentSpecialTreatment
<span class="lineno">  137 </span><span class="decl"><span class="nottickedoff">realize code = IdentSpecialTreatment</span>
<span class="lineno">  138 </span><span class="spaces">  </span><span class="nottickedoff">{ atDefSite = DefReplace code</span>
<span class="lineno">  139 </span><span class="spaces">  </span><span class="nottickedoff">, atUseSite = UsePreserve</span>
<span class="lineno">  140 </span><span class="spaces">  </span><span class="nottickedoff">}</span></span>
<span class="lineno">  141 </span>
<span class="lineno">  142 </span>-- | Use `rename` for identifiers whose definition can be translated, but has to
<span class="lineno">  143 </span>-- be renamed. This is useful for certain definitions whose name on the
<span class="lineno">  144 </span>-- SAWCore/Cryptol side clashes with names on the Coq side. For instance, `at`
<span class="lineno">  145 </span>-- is a reserved Coq keyword, but is used as a function name in SAWCore Prelude.
<span class="lineno">  146 </span>-- Also useful for translation notations, until they are better supported.
<span class="lineno">  147 </span>rename :: Coq.Ident -&gt; IdentSpecialTreatment
<span class="lineno">  148 </span><span class="decl"><span class="nottickedoff">rename ident = IdentSpecialTreatment</span>
<span class="lineno">  149 </span><span class="spaces">  </span><span class="nottickedoff">{ atDefSite = DefRename ident</span>
<span class="lineno">  150 </span><span class="spaces">  </span><span class="nottickedoff">, atUseSite = UseRename Nothing ident False</span>
<span class="lineno">  151 </span><span class="spaces">  </span><span class="nottickedoff">}</span></span>
<span class="lineno">  152 </span>
<span class="lineno">  153 </span>-- | Replace any occurrences of identifier applied to @n@ arguments with the
<span class="lineno">  154 </span>-- supplied Coq term
<span class="lineno">  155 </span>replaceDropArgs :: Int -&gt; Coq.Term -&gt; IdentSpecialTreatment
<span class="lineno">  156 </span><span class="decl"><span class="nottickedoff">replaceDropArgs n term = IdentSpecialTreatment</span>
<span class="lineno">  157 </span><span class="spaces">  </span><span class="nottickedoff">{ atDefSite = DefSkip</span>
<span class="lineno">  158 </span><span class="spaces">  </span><span class="nottickedoff">, atUseSite = UseMacro n (const term)</span>
<span class="lineno">  159 </span><span class="spaces">  </span><span class="nottickedoff">}</span></span>
<span class="lineno">  160 </span>
<span class="lineno">  161 </span>-- | A version of 'replaceDropArgs' that drops no arguments; i.e., just replaces
<span class="lineno">  162 </span>-- an identifier with the supplied Coq term
<span class="lineno">  163 </span>replace :: Coq.Term -&gt; IdentSpecialTreatment
<span class="lineno">  164 </span><span class="decl"><span class="nottickedoff">replace = replaceDropArgs 0</span></span>
<span class="lineno">  165 </span>
<span class="lineno">  166 </span>
<span class="lineno">  167 </span>-- | Use `skip` for identifiers that are already defined in the appropriate
<span class="lineno">  168 </span>-- module on the Coq side.
<span class="lineno">  169 </span>skip :: IdentSpecialTreatment
<span class="lineno">  170 </span><span class="decl"><span class="nottickedoff">skip = IdentSpecialTreatment</span>
<span class="lineno">  171 </span><span class="spaces">  </span><span class="nottickedoff">{ atDefSite = DefSkip</span>
<span class="lineno">  172 </span><span class="spaces">  </span><span class="nottickedoff">, atUseSite = UsePreserve</span>
<span class="lineno">  173 </span><span class="spaces">  </span><span class="nottickedoff">}</span></span>
<span class="lineno">  174 </span>
<span class="lineno">  175 </span>-- | The Coq built-in @Datatypes@ module
<span class="lineno">  176 </span>datatypesModule :: ModuleName
<span class="lineno">  177 </span><span class="decl"><span class="istickedoff">datatypesModule =</span>
<span class="lineno">  178 </span><span class="spaces">  </span><span class="istickedoff">mkModuleName [&quot;Coq&quot;, &quot;Init&quot;, &quot;Datatypes&quot;]</span></span>
<span class="lineno">  179 </span>
<span class="lineno">  180 </span>-- | The Coq built-in @Logic@ module
<span class="lineno">  181 </span>logicModule :: ModuleName
<span class="lineno">  182 </span><span class="decl"><span class="nottickedoff">logicModule =</span>
<span class="lineno">  183 </span><span class="spaces">  </span><span class="nottickedoff">mkModuleName [&quot;Coq&quot;, &quot;Init&quot;, &quot;Logic&quot;]</span></span>
<span class="lineno">  184 </span>
<span class="lineno">  185 </span>-- | The Coq built-in @String@ module.
<span class="lineno">  186 </span>stringModule :: ModuleName
<span class="lineno">  187 </span><span class="decl"><span class="nottickedoff">stringModule =</span>
<span class="lineno">  188 </span><span class="spaces">  </span><span class="nottickedoff">mkModuleName [&quot;Coq&quot;, &quot;Strings&quot;, &quot;String&quot;]</span></span>
<span class="lineno">  189 </span>
<span class="lineno">  190 </span>-- | The @SAWCoreScaffolding@ module
<span class="lineno">  191 </span>sawDefinitionsModule :: ModuleName
<span class="lineno">  192 </span><span class="decl"><span class="nottickedoff">sawDefinitionsModule = mkModuleName [&quot;SAWCoreScaffolding&quot;]</span></span>
<span class="lineno">  193 </span>
<span class="lineno">  194 </span>{-
<span class="lineno">  195 </span>polyListModule :: ModuleName
<span class="lineno">  196 </span>polyListModule = mkModuleName [&quot;PolyList&quot;]
<span class="lineno">  197 </span>-}
<span class="lineno">  198 </span>
<span class="lineno">  199 </span>sawVectorDefinitionsModule :: TranslationConfiguration -&gt; ModuleName
<span class="lineno">  200 </span><span class="decl"><span class="nottickedoff">sawVectorDefinitionsModule (TranslationConfiguration {..}) =</span>
<span class="lineno">  201 </span><span class="spaces">  </span><span class="nottickedoff">mkModuleName [Text.pack vectorModule]</span></span>
<span class="lineno">  202 </span>
<span class="lineno">  203 </span>cryptolPrimitivesModule :: ModuleName
<span class="lineno">  204 </span><span class="decl"><span class="nottickedoff">cryptolPrimitivesModule = mkModuleName [&quot;CryptolPrimitivesForSAWCore&quot;]</span></span>
<span class="lineno">  205 </span>
<span class="lineno">  206 </span>preludeExtraModule :: ModuleName
<span class="lineno">  207 </span><span class="decl"><span class="nottickedoff">preludeExtraModule = mkModuleName [&quot;SAWCorePreludeExtra&quot;]</span></span>
<span class="lineno">  208 </span>
<span class="lineno">  209 </span>specialTreatmentMap :: TranslationConfiguration -&gt;
<span class="lineno">  210 </span>                       Map ModuleName (Map String IdentSpecialTreatment)
<span class="lineno">  211 </span><span class="decl"><span class="istickedoff">specialTreatmentMap configuration = Map.fromList $</span>
<span class="lineno">  212 </span><span class="spaces">  </span><span class="istickedoff">over _1 (mkModuleName . (: [])) &lt;$&gt;</span>
<span class="lineno">  213 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Cryptol&quot;, cryptolPreludeSpecialTreatmentMap)</span>
<span class="lineno">  214 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Prelude&quot;, sawCorePreludeSpecialTreatmentMap <span class="nottickedoff">configuration</span>)</span>
<span class="lineno">  215 </span><span class="spaces">  </span><span class="istickedoff">]</span></span>
<span class="lineno">  216 </span>
<span class="lineno">  217 </span>cryptolPreludeSpecialTreatmentMap :: Map String IdentSpecialTreatment
<span class="lineno">  218 </span><span class="decl"><span class="istickedoff">cryptolPreludeSpecialTreatmentMap = Map.fromList $ []</span>
<span class="lineno">  219 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  220 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Num_rec&quot;,               <span class="nottickedoff">rename &quot;Num__rec&quot;</span>)</span>
<span class="lineno">  221 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;unsafeAssert_same_Num&quot;, <span class="nottickedoff">skip</span>) -- unsafe and unused</span>
<span class="lineno">  222 </span><span class="spaces">  </span><span class="istickedoff">]</span></span>
<span class="lineno">  223 </span>
<span class="lineno">  224 </span>-- NOTE: while I initially did the mapping from SAW core names to the
<span class="lineno">  225 </span>-- corresponding Coq construct here, it makes the job of translating SAW core
<span class="lineno">  226 </span>-- axioms into Coq theorems much more annoying, because one needs to manually
<span class="lineno">  227 </span>-- rename every constant mentioned in the statement to its Coq counterpart.
<span class="lineno">  228 </span>-- Instead, I am now trying to keep the names the same as much as possible
<span class="lineno">  229 </span>-- during this translation (it is sometimes impossible, for instance, `at` is a
<span class="lineno">  230 </span>-- reserved keyword in Coq), so that primitives' and axioms' types can be
<span class="lineno">  231 </span>-- copy-pasted as is on the Coq side.
<span class="lineno">  232 </span>sawCorePreludeSpecialTreatmentMap :: TranslationConfiguration -&gt;
<span class="lineno">  233 </span>                                     Map String IdentSpecialTreatment
<span class="lineno">  234 </span><span class="decl"><span class="istickedoff">sawCorePreludeSpecialTreatmentMap configuration =</span>
<span class="lineno">  235 </span><span class="spaces">  </span><span class="istickedoff">let <span class="nottickedoff">vectorsModule = sawVectorDefinitionsModule configuration</span> in</span>
<span class="lineno">  236 </span><span class="spaces">  </span><span class="istickedoff">Map.fromList $</span>
<span class="lineno">  237 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  238 </span><span class="spaces">  </span><span class="istickedoff">-- sawLet</span>
<span class="lineno">  239 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;sawLet&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;sawLet_def&quot;</span>) ]</span>
<span class="lineno">  240 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  241 </span><span class="spaces">  </span><span class="istickedoff">-- Unsafe SAW features</span>
<span class="lineno">  242 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  243 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;error&quot;,             <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;error&quot;</span>)</span>
<span class="lineno">  244 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;fix&quot;,               <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  245 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;fix_unfold&quot;,        <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  246 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;unsafeAssert&quot;,      <span class="nottickedoff">replaceDropArgs 3 $ Coq.Ltac &quot;solveUnsafeAssert&quot;</span>)</span>
<span class="lineno">  247 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;unsafeAssertBVULt&quot;, <span class="nottickedoff">replaceDropArgs 3 $ Coq.Ltac &quot;solveUnsafeAssertBVULt&quot;</span>)</span>
<span class="lineno">  248 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;unsafeAssertBVULe&quot;, <span class="nottickedoff">replaceDropArgs 3 $ Coq.Ltac &quot;solveUnsafeAssertBVULe&quot;</span>)</span>
<span class="lineno">  249 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;unsafeCoerce&quot;,      <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  250 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;unsafeCoerce_same&quot;, <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  251 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  252 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  253 </span><span class="spaces">  </span><span class="istickedoff">-- coercions</span>
<span class="lineno">  254 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  255 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;coerce&quot;,      <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;coerce&quot;</span>)</span>
<span class="lineno">  256 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;coerce__def&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;coerce&quot;</span>)</span>
<span class="lineno">  257 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;coerce__eq&quot;,  <span class="nottickedoff">replace (Coq.Var &quot;eq_refl&quot;)</span>)</span>
<span class="lineno">  258 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;uip&quot;,         <span class="nottickedoff">replace (Coq.Var &quot;UIP&quot;)</span>)</span>
<span class="lineno">  259 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  260 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  261 </span><span class="spaces">  </span><span class="istickedoff">-- Unit</span>
<span class="lineno">  262 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  263 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Unit&quot;,          <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;Unit&quot;</span>)</span>
<span class="lineno">  264 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;UnitType&quot;,      <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;UnitType&quot;</span>)</span>
<span class="lineno">  265 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;UnitType__rec&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;UnitType__rec&quot;</span>)</span>
<span class="lineno">  266 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  267 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  268 </span><span class="spaces">  </span><span class="istickedoff">-- Records</span>
<span class="lineno">  269 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  270 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;EmptyType&quot;,       <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  271 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;EmptyType__rec&quot;,  <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  272 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;RecordType&quot;,      <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  273 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;RecordType__rec&quot;, <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  274 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  275 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  276 </span><span class="spaces">  </span><span class="istickedoff">-- Void</span>
<span class="lineno">  277 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  278 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Void&quot;, <span class="nottickedoff">mapsTo datatypesModule &quot;Empty_set&quot;</span>)]</span>
<span class="lineno">  279 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  280 </span><span class="spaces">  </span><span class="istickedoff">-- Decidable equality, does not make sense in Coq unless turned into a type</span>
<span class="lineno">  281 </span><span class="spaces">  </span><span class="istickedoff">-- class</span>
<span class="lineno">  282 </span><span class="spaces">  </span><span class="istickedoff">-- Apparently, this is not used much for Cryptol, so we can skip it.</span>
<span class="lineno">  283 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  284 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;eq&quot;,            <span class="nottickedoff">skip</span>) -- MapsTo $ mkCoqIdent sawDefinitionsModule &quot;eq&quot;)</span>
<span class="lineno">  285 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_bitvector&quot;,  <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  286 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_Bool&quot;,       <span class="nottickedoff">skip</span>) -- MapsTo $ mkCoqIdent &quot;CryptolToCoq.SAW&quot; &quot;eq_Bool&quot;)</span>
<span class="lineno">  287 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_Nat&quot;,        <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  288 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_refl&quot;,       <span class="nottickedoff">skip</span>) -- MapsTo $ mkCoqIdent &quot;CryptolToCoq.SAW&quot; &quot;eq_refl&quot;)</span>
<span class="lineno">  289 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_VecBool&quot;,    <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  290 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_VecVec&quot;,     <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  291 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite_eq_cong_1&quot;, <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  292 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite_eq_cong_2&quot;, <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  293 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  294 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  295 </span><span class="spaces">  </span><span class="istickedoff">-- Boolean</span>
<span class="lineno">  296 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  297 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Bool&quot;,          mapsTo datatypesModule &quot;bool&quot;)</span>
<span class="lineno">  298 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;True&quot;,          <span class="nottickedoff">mapsTo datatypesModule &quot;true&quot;</span>)</span>
<span class="lineno">  299 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;False&quot;,         <span class="nottickedoff">mapsTo datatypesModule &quot;false&quot;</span>)</span>
<span class="lineno">  300 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;and&quot;,           <span class="nottickedoff">mapsTo datatypesModule &quot;andb&quot;</span>)</span>
<span class="lineno">  301 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;and__eq&quot;,       <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;and__eq&quot;</span>)</span>
<span class="lineno">  302 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;or&quot;,            <span class="nottickedoff">mapsTo datatypesModule &quot;orb&quot;</span>)</span>
<span class="lineno">  303 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;or__eq&quot;,        <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;or__eq&quot;</span>)</span>
<span class="lineno">  304 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;xor&quot;,           <span class="nottickedoff">mapsTo datatypesModule &quot;xorb&quot;</span>)</span>
<span class="lineno">  305 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;xor__eq&quot;,       <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;xor__eq&quot;</span>)</span>
<span class="lineno">  306 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;not&quot;,           <span class="nottickedoff">mapsTo datatypesModule &quot;negb&quot;</span>)</span>
<span class="lineno">  307 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;not__eq&quot;,       <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;not__eq&quot;</span>)</span>
<span class="lineno">  308 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;boolEq&quot;,        <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;boolEq&quot;</span>)</span>
<span class="lineno">  309 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;boolEq__eq&quot;,    <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;boolEq__eq&quot;</span>)</span>
<span class="lineno">  310 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite&quot;,           <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;ite&quot;</span>)</span>
<span class="lineno">  311 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;iteDep&quot;,        <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;iteDep&quot;</span>)</span>
<span class="lineno">  312 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;iteDep_True&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;iteDep_True&quot;</span>)</span>
<span class="lineno">  313 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;iteDep_False&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;iteDep_False&quot;</span>)</span>
<span class="lineno">  314 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite_bit&quot;,       <span class="nottickedoff">skip</span>) -- FIXME: change this</span>
<span class="lineno">  315 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite_eq_iteDep&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;ite_eq_iteDep&quot;</span>)</span>
<span class="lineno">  316 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  317 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  318 </span><span class="spaces">  </span><span class="istickedoff">-- Pairs</span>
<span class="lineno">  319 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  320 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;PairType&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;PairType&quot;</span>)</span>
<span class="lineno">  321 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;PairValue&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;PairValue&quot;</span>)</span>
<span class="lineno">  322 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Pair__rec&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;Pair__rec&quot;</span>)</span>
<span class="lineno">  323 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;fst&quot;,       <span class="nottickedoff">replaceDropArgs 2 $ Coq.Var &quot;fst&quot;</span>)</span>
<span class="lineno">  324 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;snd&quot;,       <span class="nottickedoff">replaceDropArgs 2 $ Coq.Var &quot;snd&quot;</span>)</span>
<span class="lineno">  325 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  326 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  327 </span><span class="spaces">  </span><span class="istickedoff">-- Equality</span>
<span class="lineno">  328 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  329 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Eq&quot;,      <span class="nottickedoff">mapsToExpl logicModule &quot;eq&quot;</span>)</span>
<span class="lineno">  330 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Eq__rec&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;Eq__rec&quot;</span>)</span>
<span class="lineno">  331 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Refl&quot;,    <span class="nottickedoff">mapsToExpl logicModule &quot;eq_refl&quot;</span>)</span>
<span class="lineno">  332 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  333 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  334 </span><span class="spaces">  </span><span class="istickedoff">-- Nat le/lt</span>
<span class="lineno">  335 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  336 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;IsLeNat&quot;     , <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;IsLeNat&quot;</span>)</span>
<span class="lineno">  337 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;IsLeNat__rec&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;IsLeNat__rec&quot;</span>)</span>
<span class="lineno">  338 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;IsLeNat_base&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;IsLeNat_base&quot;</span>)</span>
<span class="lineno">  339 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;IsLeNat_succ&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;IsLeNat_succ&quot;</span>)</span>
<span class="lineno">  340 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;IsLtNat&quot;     , <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;IsLtNat&quot;</span>)</span>
<span class="lineno">  341 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  342 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  343 </span><span class="spaces">  </span><span class="istickedoff">-- Strings</span>
<span class="lineno">  344 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  345 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;String&quot;, <span class="nottickedoff">mapsTo stringModule &quot;string&quot;</span>)</span>
<span class="lineno">  346 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;equalString&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;equalString&quot;</span>)</span>
<span class="lineno">  347 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;appendString&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;appendString&quot;</span>)</span>
<span class="lineno">  348 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  349 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  350 </span><span class="spaces">  </span><span class="istickedoff">-- Utility functions</span>
<span class="lineno">  351 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  352 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;id&quot;, <span class="nottickedoff">mapsTo datatypesModule &quot;id&quot;</span>)</span>
<span class="lineno">  353 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  354 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  355 </span><span class="spaces">  </span><span class="istickedoff">-- Natural numbers</span>
<span class="lineno">  356 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  357 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;divModNat&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;divModNat&quot;</span>)</span>
<span class="lineno">  358 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Nat&quot;,       <span class="nottickedoff">mapsTo datatypesModule &quot;nat&quot;</span>)</span>
<span class="lineno">  359 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;widthNat&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;widthNat&quot;</span>)</span>
<span class="lineno">  360 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Zero&quot;,      <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;Zero&quot;</span>)</span>
<span class="lineno">  361 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Succ&quot;,      <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;Succ&quot;</span>)</span>
<span class="lineno">  362 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;addNat&quot;,    <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;addNat&quot;</span>)</span>
<span class="lineno">  363 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;mulNat&quot;,    <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;mulNat&quot;</span>)</span>
<span class="lineno">  364 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  365 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  366 </span><span class="spaces">  </span><span class="istickedoff">-- Vectors</span>
<span class="lineno">  367 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  368 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;EmptyVec&quot;,      <span class="nottickedoff">mapsTo vectorsModule &quot;EmptyVec&quot;</span>)</span>
<span class="lineno">  369 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;at&quot;,            <span class="nottickedoff">rename &quot;sawAt&quot;</span>) -- `at` is a reserved keyword in Coq</span>
<span class="lineno">  370 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;atWithDefault&quot;, <span class="nottickedoff">mapsTo vectorsModule &quot;atWithDefault&quot;</span>)</span>
<span class="lineno">  371 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;atWithProof&quot;,   <span class="nottickedoff">mapsTo vectorsModule &quot;atWithProof&quot;</span>)</span>
<span class="lineno">  372 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;at_single&quot;,     <span class="nottickedoff">skip</span>) -- is boring, could be proved on the Coq side</span>
<span class="lineno">  373 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvAdd&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvAdd&quot;</span>)</span>
<span class="lineno">  374 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvLg2&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvLg2&quot;</span>)</span>
<span class="lineno">  375 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvMul&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvMul&quot;</span>)</span>
<span class="lineno">  376 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvNat&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvNat&quot;</span>)</span>
<span class="lineno">  377 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvNeg&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvNeg&quot;</span>)</span>
<span class="lineno">  378 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvSDiv&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;bvSDiv&quot;</span>)</span>
<span class="lineno">  379 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvSRem&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;bvSRem&quot;</span>)</span>
<span class="lineno">  380 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvSShr&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;bvSShr&quot;</span>)</span>
<span class="lineno">  381 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvSub&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvSub&quot;</span>)</span>
<span class="lineno">  382 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvToNat&quot;,       <span class="nottickedoff">mapsTo vectorsModule &quot;bvToNat&quot;</span>)</span>
<span class="lineno">  383 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvUDiv&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;bvUDiv&quot;</span>)</span>
<span class="lineno">  384 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvURem&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;bvURem&quot;</span>)</span>
<span class="lineno">  385 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvsge&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvsge&quot;</span>)</span>
<span class="lineno">  386 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvsgt&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvsgt&quot;</span>)</span>
<span class="lineno">  387 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvsle&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvsle&quot;</span>)</span>
<span class="lineno">  388 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvslt&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvslt&quot;</span>)</span>
<span class="lineno">  389 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvult&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvult&quot;</span>)</span>
<span class="lineno">  390 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvule&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;bvule&quot;</span>)</span>
<span class="lineno">  391 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;coerceVec&quot;,     <span class="nottickedoff">mapsTo vectorsModule &quot;coerceVec&quot;</span>)</span>
<span class="lineno">  392 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;eq_Vec&quot;,        <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  393 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;foldr&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;foldr&quot;</span>)</span>
<span class="lineno">  394 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;foldr_nil&quot;,     <span class="nottickedoff">mapsTo vectorsModule &quot;foldr_nil&quot;</span>)</span>
<span class="lineno">  395 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;foldr_cons&quot;,    <span class="nottickedoff">mapsTo vectorsModule &quot;foldr_cons&quot;</span>)</span>
<span class="lineno">  396 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;foldl&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;foldl&quot;</span>)</span>
<span class="lineno">  397 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;foldl_nil&quot;,     <span class="nottickedoff">mapsTo vectorsModule &quot;foldl_nil&quot;</span>)</span>
<span class="lineno">  398 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;foldl_cons&quot;,    <span class="nottickedoff">mapsTo vectorsModule &quot;foldl_cons&quot;</span>)</span>
<span class="lineno">  399 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;genWithProof&quot;,  <span class="nottickedoff">mapsTo vectorsModule &quot;genWithProof&quot;</span>)</span>
<span class="lineno">  400 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;scanl&quot;,         <span class="nottickedoff">mapsTo vectorsModule &quot;scanl&quot;</span>)</span>
<span class="lineno">  401 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;gen&quot;,           <span class="nottickedoff">mapsTo vectorsModule &quot;gen&quot;</span>)</span>
<span class="lineno">  402 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;rotateL&quot;,       <span class="nottickedoff">mapsTo vectorsModule &quot;rotateL&quot;</span>)</span>
<span class="lineno">  403 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;rotateR&quot;,       <span class="nottickedoff">mapsTo vectorsModule &quot;rotateR&quot;</span>)</span>
<span class="lineno">  404 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;shiftL&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;shiftL&quot;</span>)</span>
<span class="lineno">  405 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;shiftR&quot;,        <span class="nottickedoff">mapsTo vectorsModule &quot;shiftR&quot;</span>)</span>
<span class="lineno">  406 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;take0&quot;,         <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  407 </span><span class="spaces">  </span><span class="istickedoff">-- zip must be realized in-place because it both depends on definitions and is</span>
<span class="lineno">  408 </span><span class="spaces">  </span><span class="istickedoff">-- used by other definitions in the same file, so it can neither be pre- nor</span>
<span class="lineno">  409 </span><span class="spaces">  </span><span class="istickedoff">-- post-defined.</span>
<span class="lineno">  410 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;zip&quot;,           <span class="nottickedoff">realize zipSnippet</span>)</span>
<span class="lineno">  411 </span><span class="spaces">  </span><span class="istickedoff">-- cannot map directly to Vector.t because arguments are in a different order</span>
<span class="lineno">  412 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Vec&quot;,           <span class="nottickedoff">mapsTo vectorsModule &quot;Vec&quot;</span>)</span>
<span class="lineno">  413 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;head&quot;,          <span class="nottickedoff">mapsTo vectorsModule &quot;head&quot;</span>)</span>
<span class="lineno">  414 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;tail&quot;,          <span class="nottickedoff">mapsTo vectorsModule &quot;tail&quot;</span>)</span>
<span class="lineno">  415 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;head_gen&quot;,      <span class="nottickedoff">mapsTo vectorsModule &quot;head_gen&quot;</span>)</span>
<span class="lineno">  416 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;tail_gen&quot;,      <span class="nottickedoff">mapsTo vectorsModule &quot;tail_gen&quot;</span>)</span>
<span class="lineno">  417 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  418 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  419 </span><span class="spaces">  </span><span class="istickedoff">-- Streams</span>
<span class="lineno">  420 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  421 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;streamScanl&quot;,   <span class="nottickedoff">mapsTo preludeExtraModule &quot;streamScanl&quot;</span>)</span>
<span class="lineno">  422 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  423 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  424 </span><span class="spaces">  </span><span class="istickedoff">-- Integers</span>
<span class="lineno">  425 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  426 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Integer&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;Integer&quot;</span>)</span>
<span class="lineno">  427 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intAdd&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intAdd&quot;</span>)</span>
<span class="lineno">  428 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intSub&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intSub&quot;</span>)</span>
<span class="lineno">  429 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intMul&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intMul&quot;</span>)</span>
<span class="lineno">  430 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intDiv&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intDiv&quot;</span>)</span>
<span class="lineno">  431 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intMod&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intMod&quot;</span>)</span>
<span class="lineno">  432 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intMin&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intMin&quot;</span>)</span>
<span class="lineno">  433 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intMax&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intMax&quot;</span>)</span>
<span class="lineno">  434 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intNeg&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intNeg&quot;</span>)</span>
<span class="lineno">  435 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intAbs&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intAbs&quot;</span>)</span>
<span class="lineno">  436 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intEq&quot;,    <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intEq&quot;</span>)</span>
<span class="lineno">  437 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intLe&quot;,    <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intLe&quot;</span>)</span>
<span class="lineno">  438 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intLt&quot;,    <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intLt&quot;</span>)</span>
<span class="lineno">  439 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intToNat&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intToNat&quot;</span>)</span>
<span class="lineno">  440 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;natToInt&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;natToInt&quot;</span>)</span>
<span class="lineno">  441 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intToBv&quot;,  <span class="nottickedoff">mapsTo vectorsModule &quot;intToBv&quot;</span>)</span>
<span class="lineno">  442 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvToInt&quot;,  <span class="nottickedoff">mapsTo vectorsModule &quot;bvToInt&quot;</span>)</span>
<span class="lineno">  443 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;sbvToInt&quot;, <span class="nottickedoff">mapsTo vectorsModule &quot;sbvToInt&quot;</span>)</span>
<span class="lineno">  444 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  445 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  446 </span><span class="spaces">  </span><span class="istickedoff">-- Modular integers</span>
<span class="lineno">  447 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  448 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;IntMod&quot;,     <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;IntMod&quot;</span>)</span>
<span class="lineno">  449 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;toIntMod&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;toIntMod&quot;</span>)</span>
<span class="lineno">  450 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;fromIntMod&quot;, <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;fromIntMod&quot;</span>)</span>
<span class="lineno">  451 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intModEq&quot;,   <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intModEq&quot;</span>)</span>
<span class="lineno">  452 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intModAdd&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intModAdd&quot;</span>)</span>
<span class="lineno">  453 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intModSub&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intModSub&quot;</span>)</span>
<span class="lineno">  454 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intModMul&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intModMul&quot;</span>)</span>
<span class="lineno">  455 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;intModNeg&quot;,  <span class="nottickedoff">mapsTo sawDefinitionsModule &quot;intModNeg&quot;</span>)</span>
<span class="lineno">  456 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  457 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  458 </span><span class="spaces">  </span><span class="istickedoff">-- Axioms currently skipped</span>
<span class="lineno">  459 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  460 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;drop0&quot;,                <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  461 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvugt&quot;,                <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  462 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvuge&quot;,                <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  463 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvPopcount&quot;,           <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  464 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvCountLeadingZeros&quot;,  <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  465 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvCountTrailingZeros&quot;, <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  466 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvForall&quot;,             <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  467 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvAddZeroL&quot;,           <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  468 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvAddZeroR&quot;,           <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  469 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvShl&quot;,                <span class="nottickedoff">mapsTo vectorsModule &quot;bvShl&quot;</span>)</span>
<span class="lineno">  470 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvShr&quot;,                <span class="nottickedoff">mapsTo vectorsModule &quot;bvShr&quot;</span>)</span>
<span class="lineno">  471 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvShiftL_bvShl&quot;,       <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  472 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvShiftR_bvShr&quot;,       <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  473 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bvEq_refl&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  474 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;equalNat_bv&quot;,          <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  475 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Float&quot;,                <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  476 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;mkFloat&quot;,              <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  477 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Double&quot;,               <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  478 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;mkDouble&quot;,             <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  479 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bveq_sameL&quot;,           <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  480 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bveq_sameR&quot;,           <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  481 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;bveq_same2&quot;,           <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  482 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite_split_cong&quot;,       <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  483 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;ite_join_cong&quot;,        <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  484 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;map_map&quot;,              <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  485 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun0&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  486 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun1&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  487 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun2&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  488 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun3&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  489 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun4&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  490 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun5&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  491 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;test_fun6&quot;,            <span class="nottickedoff">skip</span>)</span>
<span class="lineno">  492 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  493 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  494 </span><span class="spaces">  </span><span class="istickedoff">-- Either</span>
<span class="lineno">  495 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  496 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;Either&quot;,     <span class="nottickedoff">mapsTo datatypesModule &quot;sum&quot;</span>)</span>
<span class="lineno">  497 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Left&quot;,       <span class="nottickedoff">mapsToExpl datatypesModule &quot;inl&quot;</span>)</span>
<span class="lineno">  498 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Right&quot;,       <span class="nottickedoff">mapsToExpl datatypesModule &quot;inr&quot;</span>)</span>
<span class="lineno">  499 </span><span class="spaces">  </span><span class="istickedoff">]</span>
<span class="lineno">  500 </span><span class="spaces"></span><span class="istickedoff"></span>
<span class="lineno">  501 </span><span class="spaces">  </span><span class="istickedoff">-- Lists</span>
<span class="lineno">  502 </span><span class="spaces">  </span><span class="istickedoff">++</span>
<span class="lineno">  503 </span><span class="spaces">  </span><span class="istickedoff">[ (&quot;List&quot;, <span class="nottickedoff">mapsToExpl datatypesModule &quot;list&quot;</span>)</span>
<span class="lineno">  504 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Nil&quot;, <span class="nottickedoff">mapsToExpl datatypesModule &quot;nil&quot;</span>)</span>
<span class="lineno">  505 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;Cons&quot;, <span class="nottickedoff">mapsToExpl datatypesModule &quot;cons&quot;</span>)</span>
<span class="lineno">  506 </span><span class="spaces">  </span><span class="istickedoff">, (&quot;List__rec&quot;, <span class="nottickedoff">mapsToExpl datatypesModule &quot;list_rect&quot;</span>)</span>
<span class="lineno">  507 </span><span class="spaces">  </span><span class="istickedoff">]</span></span>
<span class="lineno">  508 </span>
<span class="lineno">  509 </span>escapeIdent :: Coq.Ident -&gt; Coq.Ident
<span class="lineno">  510 </span><span class="decl"><span class="istickedoff">escapeIdent (Coq.Ident str)</span>
<span class="lineno">  511 </span><span class="spaces">  </span><span class="istickedoff">| <span class="tickonlytrue">all okChar str</span> = Coq.Ident str</span>
<span class="lineno">  512 </span><span class="spaces">  </span><span class="istickedoff">| <span class="nottickedoff">otherwise</span>      = <span class="nottickedoff">Coq.Ident (&quot;Op_&quot; ++ zEncodeString str)</span></span>
<span class="lineno">  513 </span><span class="spaces"> </span><span class="istickedoff">where</span>
<span class="lineno">  514 </span><span class="spaces">   </span><span class="istickedoff">okChar x = isAlphaNum x || <span class="nottickedoff">x `elem` (&quot;_'&quot; :: String)</span></span></span>
<span class="lineno">  515 </span>
<span class="lineno">  516 </span>zipSnippet :: String
<span class="lineno">  517 </span><span class="decl"><span class="nottickedoff">zipSnippet = [i|</span>
<span class="lineno">  518 </span><span class="spaces"></span><span class="nottickedoff">Fixpoint zip (a b : sort 0) (m n : nat) (xs : Vec m a) (ys : Vec n b)</span>
<span class="lineno">  519 </span><span class="spaces">  </span><span class="nottickedoff">: Vec (minNat m n) (a * b) :=</span>
<span class="lineno">  520 </span><span class="spaces">  </span><span class="nottickedoff">match</span>
<span class="lineno">  521 </span><span class="spaces">    </span><span class="nottickedoff">xs in Vector.t _ m'</span>
<span class="lineno">  522 </span><span class="spaces">    </span><span class="nottickedoff">return Vector.t _ (minNat m' n)</span>
<span class="lineno">  523 </span><span class="spaces">  </span><span class="nottickedoff">with</span>
<span class="lineno">  524 </span><span class="spaces">  </span><span class="nottickedoff">| Vector.nil =&gt; Vector.nil _</span>
<span class="lineno">  525 </span><span class="spaces">  </span><span class="nottickedoff">| Vector.cons x pm xs =&gt;</span>
<span class="lineno">  526 </span><span class="spaces">    </span><span class="nottickedoff">match</span>
<span class="lineno">  527 </span><span class="spaces">      </span><span class="nottickedoff">ys in Vector.t _ n'</span>
<span class="lineno">  528 </span><span class="spaces">      </span><span class="nottickedoff">return Vector.t _ (minNat (S pm) n')</span>
<span class="lineno">  529 </span><span class="spaces">    </span><span class="nottickedoff">with</span>
<span class="lineno">  530 </span><span class="spaces">    </span><span class="nottickedoff">| Vector.nil =&gt; Vector.nil _</span>
<span class="lineno">  531 </span><span class="spaces">    </span><span class="nottickedoff">| Vector.cons y pm' ys =&gt; Vector.cons _ (x, y) _ (zip _ _ _ _ xs ys)</span>
<span class="lineno">  532 </span><span class="spaces">    </span><span class="nottickedoff">end</span>
<span class="lineno">  533 </span><span class="spaces">  </span><span class="nottickedoff">end</span>
<span class="lineno">  534 </span><span class="spaces"></span><span class="nottickedoff">.</span>
<span class="lineno">  535 </span><span class="spaces"></span><span class="nottickedoff">|]</span></span>

</pre>
</body>
</html>
