enable_experimental;
m <- yosys_import "test.json";
let {{
  (===>) : {a, y} (fin y) => (a -> {Y: [y](Option Bit)}) -> (a -> {Y: [y]}) -> a -> Bit
  (===>) spec impl a = and [i == fromOption i s | i <- (impl a).Y | s <- (spec a).Y]
                       where
                         fromOption : {b} b -> Option b -> b
                         fromOption def opt = case opt of
                                                Some x -> x
                                                None   -> def

  spec_ne : {A: [0], B: [0]} -> {Y: [0](Option Bit)}
  spec_ne in = {Y = out}
               where
                 out = spec (in.A, in.B)
                 spec a = []

  spec_div : {A: [0], B: [0]} -> {Y: [0](Option Bit)}
  spec_div in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = []

  spec_add1 : {A: [0], B: [0]} -> {Y: [2](Option Bit)}
  spec_add1 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = [Some 0, Some 0]

  spec_nex1 : {A: [0], B: [0]} -> {Y: [2](Option Bit)}
  spec_nex1 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = [Some 0, Some 0]

  spec_mod1 : {A: [0], B: [0]} -> {Y: [2](Option Bit)}
  spec_mod1 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = [None, None]

  spec_and2 : {A: [2], B: [2]} -> {Y: [2](Option Bit)}
  spec_and2 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b00, 0b00) then [Some 0, Some 0]
                             | a == (0b00, 0b01) then [Some 0, Some 0]
                             | a == (0b00, 0b10) then [Some 0, Some 0]
                             | a == (0b00, 0b11) then [Some 0, Some 0]
                             | a == (0b01, 0b00) then [Some 0, Some 0]
                             | a == (0b01, 0b01) then [Some 0, Some 1]
                             | a == (0b01, 0b10) then [Some 0, Some 0]
                             | a == (0b01, 0b11) then [Some 0, Some 1]
                             | a == (0b10, 0b00) then [Some 0, Some 0]
                             | a == (0b10, 0b01) then [Some 0, Some 0]
                             | a == (0b10, 0b10) then [Some 1, Some 0]
                             | a == (0b10, 0b11) then [Some 1, Some 0]
                             | a == (0b11, 0b00) then [Some 0, Some 0]
                             | a == (0b11, 0b01) then [Some 0, Some 1]
                             | a == (0b11, 0b10) then [Some 1, Some 0]
                             | a == (0b11, 0b11) then [Some 1, Some 1]
                            else repeat None

  spec_or2 : {A: [2], B: [2]} -> {Y: [2](Option Bit)}
  spec_or2 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (0b00, 0b00) then [Some 0, Some 0]
                            | a == (0b00, 0b01) then [Some 0, Some 1]
                            | a == (0b00, 0b10) then [Some 1, Some 0]
                            | a == (0b00, 0b11) then [Some 1, Some 1]
                            | a == (0b01, 0b00) then [Some 0, Some 1]
                            | a == (0b01, 0b01) then [Some 0, Some 1]
                            | a == (0b01, 0b10) then [Some 1, Some 1]
                            | a == (0b01, 0b11) then [Some 1, Some 1]
                            | a == (0b10, 0b00) then [Some 1, Some 0]
                            | a == (0b10, 0b01) then [Some 1, Some 1]
                            | a == (0b10, 0b10) then [Some 1, Some 0]
                            | a == (0b10, 0b11) then [Some 1, Some 1]
                            | a == (0b11, 0b00) then [Some 1, Some 1]
                            | a == (0b11, 0b01) then [Some 1, Some 1]
                            | a == (0b11, 0b10) then [Some 1, Some 1]
                            | a == (0b11, 0b11) then [Some 1, Some 1]
                           else repeat None

  spec_ge2 : {A: [2], B: [2]} -> {Y: [2](Option Bit)}
  spec_ge2 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (0b00, 0b00) then [Some 0, Some 1]
                            | a == (0b00, 0b01) then [Some 0, Some 0]
                            | a == (0b00, 0b10) then [Some 0, Some 0]
                            | a == (0b00, 0b11) then [Some 0, Some 0]
                            | a == (0b01, 0b00) then [Some 0, Some 1]
                            | a == (0b01, 0b01) then [Some 0, Some 1]
                            | a == (0b01, 0b10) then [Some 0, Some 0]
                            | a == (0b01, 0b11) then [Some 0, Some 0]
                            | a == (0b10, 0b00) then [Some 0, Some 1]
                            | a == (0b10, 0b01) then [Some 0, Some 1]
                            | a == (0b10, 0b10) then [Some 0, Some 1]
                            | a == (0b10, 0b11) then [Some 0, Some 0]
                            | a == (0b11, 0b00) then [Some 0, Some 1]
                            | a == (0b11, 0b01) then [Some 0, Some 1]
                            | a == (0b11, 0b10) then [Some 0, Some 1]
                            | a == (0b11, 0b11) then [Some 0, Some 1]
                           else repeat None

  spec_eq3 : {A: [2], B: [0]} -> {Y: [1](Option Bit)}
  spec_eq3 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (0b00, zero) then [Some 1]
                            | a == (0b01, zero) then [Some 0]
                            | a == (0b10, zero) then [Some 0]
                            | a == (0b11, zero) then [Some 0]
                           else repeat None

  spec_sub3 : {A: [2], B: [0]} -> {Y: [1](Option Bit)}
  spec_sub3 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b00, zero) then [Some 0]
                             | a == (0b01, zero) then [Some 1]
                             | a == (0b10, zero) then [Some 0]
                             | a == (0b11, zero) then [Some 1]
                            else repeat None

  spec_gt3 : {A: [2], B: [0]} -> {Y: [1](Option Bit)}
  spec_gt3 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (0b00, zero) then [Some 0]
                            | a == (0b01, zero) then [Some 1]
                            | a == (0b10, zero) then [Some 0]
                            | a == (0b11, zero) then [Some 0]
                           else repeat None

  spec_eqx4 : {A: [0], B: [2]} -> {Y: [1](Option Bit)}
  spec_eqx4 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (zero, 0b00) then [Some 1]
                             | a == (zero, 0b01) then [Some 0]
                             | a == (zero, 0b10) then [Some 0]
                             | a == (zero, 0b11) then [Some 0]
                            else repeat None

  spec_xnor4 : {A: [0], B: [2]} -> {Y: [1](Option Bit)}
  spec_xnor4 in = {Y = out}
                  where
                    out = spec (in.A, in.B)
                    spec a = if a == (zero, 0b00) then [Some 1]
                              | a == (zero, 0b01) then [Some 0]
                              | a == (zero, 0b10) then [Some 1]
                              | a == (zero, 0b11) then [Some 0]
                             else repeat None

  spec_le4 : {A: [0], B: [2]} -> {Y: [1](Option Bit)}
  spec_le4 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (zero, 0b00) then [Some 1]
                            | a == (zero, 0b01) then [Some 1]
                            | a == (zero, 0b10) then [Some 0]
                            | a == (zero, 0b11) then [Some 0]
                           else repeat None

  spec_mul5 : {A: [2], B: [2]} -> {Y: [1](Option Bit)}
  spec_mul5 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b00, 0b00) then [Some 0]
                             | a == (0b00, 0b01) then [Some 0]
                             | a == (0b00, 0b10) then [Some 0]
                             | a == (0b00, 0b11) then [Some 0]
                             | a == (0b01, 0b00) then [Some 0]
                             | a == (0b01, 0b01) then [Some 1]
                             | a == (0b01, 0b10) then [Some 0]
                             | a == (0b01, 0b11) then [Some 1]
                             | a == (0b10, 0b00) then [Some 0]
                             | a == (0b10, 0b01) then [Some 0]
                             | a == (0b10, 0b10) then [Some 0]
                             | a == (0b10, 0b11) then [Some 0]
                             | a == (0b11, 0b00) then [Some 0]
                             | a == (0b11, 0b01) then [Some 1]
                             | a == (0b11, 0b10) then [Some 0]
                             | a == (0b11, 0b11) then [Some 1]
                            else repeat None

  spec_xor5 : {A: [2], B: [2]} -> {Y: [1](Option Bit)}
  spec_xor5 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b00, 0b00) then [Some 0]
                             | a == (0b00, 0b01) then [Some 1]
                             | a == (0b00, 0b10) then [Some 0]
                             | a == (0b00, 0b11) then [Some 1]
                             | a == (0b01, 0b00) then [Some 1]
                             | a == (0b01, 0b01) then [Some 0]
                             | a == (0b01, 0b10) then [Some 1]
                             | a == (0b01, 0b11) then [Some 0]
                             | a == (0b10, 0b00) then [Some 0]
                             | a == (0b10, 0b01) then [Some 1]
                             | a == (0b10, 0b10) then [Some 0]
                             | a == (0b10, 0b11) then [Some 1]
                             | a == (0b11, 0b00) then [Some 1]
                             | a == (0b11, 0b01) then [Some 0]
                             | a == (0b11, 0b10) then [Some 1]
                             | a == (0b11, 0b11) then [Some 0]
                            else repeat None

  spec_lt5 : {A: [2], B: [2]} -> {Y: [1](Option Bit)}
  spec_lt5 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (0b00, 0b00) then [Some 0]
                            | a == (0b00, 0b01) then [Some 1]
                            | a == (0b00, 0b10) then [Some 0]
                            | a == (0b00, 0b11) then [Some 0]
                            | a == (0b01, 0b00) then [Some 0]
                            | a == (0b01, 0b01) then [Some 0]
                            | a == (0b01, 0b10) then [Some 0]
                            | a == (0b01, 0b11) then [Some 0]
                            | a == (0b10, 0b00) then [Some 1]
                            | a == (0b10, 0b01) then [Some 1]
                            | a == (0b10, 0b10) then [Some 0]
                            | a == (0b10, 0b11) then [Some 1]
                            | a == (0b11, 0b00) then [Some 1]
                            | a == (0b11, 0b01) then [Some 1]
                            | a == (0b11, 0b10) then [Some 0]
                            | a == (0b11, 0b11) then [Some 0]
                           else repeat None

  spec_ne6 : {A: [2], B: [2]} -> {Y: [3](Option Bit)}
  spec_ne6 in = {Y = out}
                where
                  out = spec (in.A, in.B)
                  spec a = if a == (0b00, 0b00) then [Some 0, Some 0, Some 0]
                            | a == (0b00, 0b01) then [Some 0, Some 0, Some 1]
                            | a == (0b00, 0b10) then [Some 0, Some 0, Some 1]
                            | a == (0b00, 0b11) then [Some 0, Some 0, Some 1]
                            | a == (0b01, 0b00) then [Some 0, Some 0, Some 1]
                            | a == (0b01, 0b01) then [Some 0, Some 0, Some 0]
                            | a == (0b01, 0b10) then [Some 0, Some 0, Some 1]
                            | a == (0b01, 0b11) then [Some 0, Some 0, Some 1]
                            | a == (0b10, 0b00) then [Some 0, Some 0, Some 1]
                            | a == (0b10, 0b01) then [Some 0, Some 0, Some 1]
                            | a == (0b10, 0b10) then [Some 0, Some 0, Some 0]
                            | a == (0b10, 0b11) then [Some 0, Some 0, Some 1]
                            | a == (0b11, 0b00) then [Some 0, Some 0, Some 1]
                            | a == (0b11, 0b01) then [Some 0, Some 0, Some 1]
                            | a == (0b11, 0b10) then [Some 0, Some 0, Some 1]
                            | a == (0b11, 0b11) then [Some 0, Some 0, Some 0]
                           else repeat None

  spec_div6 : {A: [2], B: [2]} -> {Y: [3](Option Bit)}
  spec_div6 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b00, 0b00) then [None, None, None]
                             | a == (0b00, 0b01) then [Some 0, Some 0, Some 0]
                             | a == (0b00, 0b10) then [Some 0, Some 0, Some 0]
                             | a == (0b00, 0b11) then [Some 0, Some 0, Some 0]
                             | a == (0b01, 0b00) then [None, None, None]
                             | a == (0b01, 0b01) then [Some 0, Some 0, Some 1]
                             | a == (0b01, 0b10) then [Some 0, Some 0, Some 0]
                             | a == (0b01, 0b11) then [Some 1, Some 1, Some 1]
                             | a == (0b10, 0b00) then [None, None, None]
                             | a == (0b10, 0b01) then [Some 1, Some 1, Some 0]
                             | a == (0b10, 0b10) then [Some 0, Some 0, Some 1]
                             | a == (0b10, 0b11) then [Some 0, Some 1, Some 0]
                             | a == (0b11, 0b00) then [None, None, None]
                             | a == (0b11, 0b01) then [Some 1, Some 1, Some 1]
                             | a == (0b11, 0b10) then [Some 0, Some 0, Some 0]
                             | a == (0b11, 0b11) then [Some 0, Some 0, Some 1]
                            else repeat None

  spec_logic_and : {A: [1], B: [0]} -> {Y: [1](Option Bit)}
  spec_logic_and in = {Y = out}
                      where
                        out = spec (in.A, in.B)
                        spec a = if a == (0b0, zero) then [Some 0]
                                  | a == (0b1, zero) then [Some 0]
                                 else repeat None

  spec_logic_and2 : {A: [2], B: [2]} -> {Y: [3](Option Bit)}
  spec_logic_and2 in = {Y = out}
                       where
                         out = spec (in.A, in.B)
                         spec a = if a == (0b00, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b00, 0b01) then [Some 0, Some 0, Some 0]
                                   | a == (0b00, 0b10) then [Some 0, Some 0, Some 0]
                                   | a == (0b00, 0b11) then [Some 0, Some 0, Some 0]
                                   | a == (0b01, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b01, 0b01) then [Some 0, Some 0, Some 1]
                                   | a == (0b01, 0b10) then [Some 0, Some 0, Some 1]
                                   | a == (0b01, 0b11) then [Some 0, Some 0, Some 1]
                                   | a == (0b10, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b10, 0b01) then [Some 0, Some 0, Some 1]
                                   | a == (0b10, 0b10) then [Some 0, Some 0, Some 1]
                                   | a == (0b10, 0b11) then [Some 0, Some 0, Some 1]
                                   | a == (0b11, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b11, 0b01) then [Some 0, Some 0, Some 1]
                                   | a == (0b11, 0b10) then [Some 0, Some 0, Some 1]
                                   | a == (0b11, 0b11) then [Some 0, Some 0, Some 1]
                                  else repeat None

  spec_logic_and4 : {A: [1], B: [0]} -> {Y: [1](Option Bit)}
  spec_logic_and4 in = {Y = out}
                       where
                         out = spec (in.A, in.B)
                         spec a = if a == (0b0, zero) then [Some 0]
                                   | a == (0b1, zero) then [Some 0]
                                  else repeat None

  spec_logic_and6 : {A: [2], B: [2]} -> {Y: [3](Option Bit)}
  spec_logic_and6 in = {Y = out}
                       where
                         out = spec (in.A, in.B)
                         spec a = if a == (0b00, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b00, 0b01) then [Some 0, Some 0, Some 0]
                                   | a == (0b00, 0b10) then [Some 0, Some 0, Some 0]
                                   | a == (0b00, 0b11) then [Some 0, Some 0, Some 0]
                                   | a == (0b01, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b01, 0b01) then [Some 0, Some 0, Some 1]
                                   | a == (0b01, 0b10) then [Some 0, Some 0, Some 1]
                                   | a == (0b01, 0b11) then [Some 0, Some 0, Some 1]
                                   | a == (0b10, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b10, 0b01) then [Some 0, Some 0, Some 1]
                                   | a == (0b10, 0b10) then [Some 0, Some 0, Some 1]
                                   | a == (0b10, 0b11) then [Some 0, Some 0, Some 1]
                                   | a == (0b11, 0b00) then [Some 0, Some 0, Some 0]
                                   | a == (0b11, 0b01) then [Some 0, Some 0, Some 1]
                                   | a == (0b11, 0b10) then [Some 0, Some 0, Some 1]
                                   | a == (0b11, 0b11) then [Some 0, Some 0, Some 1]
                                  else repeat None

  spec_pos : {A: [0]} -> {Y: [3](Option Bit)}
  spec_pos in = {Y = out}
                where
                  out = spec in.A
                  spec a = [Some 0, Some 0, Some 0]

  spec_logic_not1 : {A: [1]} -> {Y: [3](Option Bit)}
  spec_logic_not1 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b0 then [Some 0, Some 0, Some 1]
                                   | a == 0b1 then [Some 0, Some 0, Some 0]
                                  else repeat None

  spec_reduce_or1 : {A: [1]} -> {Y: [3](Option Bit)}
  spec_reduce_or1 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b0 then [Some 0, Some 0, Some 0]
                                   | a == 0b1 then [Some 0, Some 0, Some 1]
                                  else repeat None

  spec_pos2 : {A: [2]} -> {Y: [2](Option Bit)}
  spec_pos2 in = {Y = out}
                 where
                   out = spec in.A
                   spec a = if a == 0b00 then [Some 0, Some 0]
                             | a == 0b01 then [Some 0, Some 1]
                             | a == 0b10 then [Some 1, Some 0]
                             | a == 0b11 then [Some 1, Some 1]
                            else repeat None

  spec_logic_not3 : {A: [3]} -> {Y: [1](Option Bit)}
  spec_logic_not3 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b000 then [Some 1]
                                   | a == 0b001 then [Some 0]
                                   | a == 0b010 then [Some 0]
                                   | a == 0b011 then [Some 0]
                                   | a == 0b100 then [Some 0]
                                   | a == 0b101 then [Some 0]
                                   | a == 0b110 then [Some 0]
                                   | a == 0b111 then [Some 0]
                                  else repeat None

  spec_reduce_or3 : {A: [3]} -> {Y: [1](Option Bit)}
  spec_reduce_or3 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b000 then [Some 0]
                                   | a == 0b001 then [Some 1]
                                   | a == 0b010 then [Some 1]
                                   | a == 0b011 then [Some 1]
                                   | a == 0b100 then [Some 1]
                                   | a == 0b101 then [Some 1]
                                   | a == 0b110 then [Some 1]
                                   | a == 0b111 then [Some 1]
                                  else repeat None

  spec_pos4 : {A: [0]} -> {Y: [3](Option Bit)}
  spec_pos4 in = {Y = out}
                 where
                   out = spec in.A
                   spec a = [Some 0, Some 0, Some 0]

  spec_logic_not5 : {A: [1]} -> {Y: [3](Option Bit)}
  spec_logic_not5 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b0 then [Some 0, Some 0, Some 1]
                                   | a == 0b1 then [Some 0, Some 0, Some 0]
                                  else repeat None

  spec_reduce_or5 : {A: [1]} -> {Y: [3](Option Bit)}
  spec_reduce_or5 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b0 then [Some 0, Some 0, Some 0]
                                   | a == 0b1 then [Some 0, Some 0, Some 1]
                                  else repeat None

  spec_pos6 : {A: [2]} -> {Y: [2](Option Bit)}
  spec_pos6 in = {Y = out}
                 where
                   out = spec in.A
                   spec a = if a == 0b00 then [Some 0, Some 0]
                             | a == 0b01 then [Some 0, Some 1]
                             | a == 0b10 then [Some 1, Some 0]
                             | a == 0b11 then [Some 1, Some 1]
                            else repeat None

  spec_logic_not7 : {A: [3]} -> {Y: [1](Option Bit)}
  spec_logic_not7 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b000 then [Some 1]
                                   | a == 0b001 then [Some 0]
                                   | a == 0b010 then [Some 0]
                                   | a == 0b011 then [Some 0]
                                   | a == 0b100 then [Some 0]
                                   | a == 0b101 then [Some 0]
                                   | a == 0b110 then [Some 0]
                                   | a == 0b111 then [Some 0]
                                  else repeat None

  spec_reduce_or7 : {A: [3]} -> {Y: [1](Option Bit)}
  spec_reduce_or7 in = {Y = out}
                       where
                         out = spec in.A
                         spec a = if a == 0b000 then [Some 0]
                                   | a == 0b001 then [Some 1]
                                   | a == 0b010 then [Some 1]
                                   | a == 0b011 then [Some 1]
                                   | a == 0b100 then [Some 1]
                                   | a == 0b101 then [Some 1]
                                   | a == 0b110 then [Some 1]
                                   | a == 0b111 then [Some 1]
                                  else repeat None

  spec_sshr : {A: [0], B: [1]} -> {Y: [1](Option Bit)}
  spec_sshr in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (zero, 0b0) then [Some 0]
                             | a == (zero, 0b1) then [Some 0]
                            else repeat None

  spec_shr2 : {A: [1], B: [1]} -> {Y: [1](Option Bit)}
  spec_shr2 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b0, 0b0) then [Some 0]
                             | a == (0b0, 0b1) then [Some 0]
                             | a == (0b1, 0b0) then [Some 1]
                             | a == (0b1, 0b1) then [Some 0]
                            else repeat None

  spec_sshr3 : {A: [1], B: [2]} -> {Y: [3](Option Bit)}
  spec_sshr3 in = {Y = out}
                  where
                    out = spec (in.A, in.B)
                    spec a = if a == (0b0, 0b00) then [Some 0, Some 0, Some 0]
                              | a == (0b0, 0b01) then [Some 0, Some 0, Some 0]
                              | a == (0b0, 0b10) then [Some 0, Some 0, Some 0]
                              | a == (0b0, 0b11) then [Some 0, Some 0, Some 0]
                              | a == (0b1, 0b00) then [Some 0, Some 0, Some 1]
                              | a == (0b1, 0b01) then [Some 0, Some 0, Some 0]
                              | a == (0b1, 0b10) then [Some 0, Some 0, Some 0]
                              | a == (0b1, 0b11) then [Some 0, Some 0, Some 0]
                             else repeat None

  spec_shr5 : {A: [2], B: [2]} -> {Y: [2](Option Bit)}
  spec_shr5 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b00, 0b00) then [Some 0, Some 0]
                             | a == (0b00, 0b01) then [Some 0, Some 0]
                             | a == (0b00, 0b10) then [Some 0, Some 0]
                             | a == (0b00, 0b11) then [Some 0, Some 0]
                             | a == (0b01, 0b00) then [Some 0, Some 1]
                             | a == (0b01, 0b01) then [Some 0, Some 0]
                             | a == (0b01, 0b10) then [Some 0, Some 0]
                             | a == (0b01, 0b11) then [Some 0, Some 0]
                             | a == (0b10, 0b00) then [Some 1, Some 0]
                             | a == (0b10, 0b01) then [Some 0, Some 1]
                             | a == (0b10, 0b10) then [Some 0, Some 0]
                             | a == (0b10, 0b11) then [Some 0, Some 0]
                             | a == (0b11, 0b00) then [Some 1, Some 1]
                             | a == (0b11, 0b01) then [Some 0, Some 1]
                             | a == (0b11, 0b10) then [Some 0, Some 0]
                             | a == (0b11, 0b11) then [Some 0, Some 0]
                            else repeat None

  spec_sshr6 : {A: [1], B: [0]} -> {Y: [1](Option Bit)}
  spec_sshr6 in = {Y = out}
                  where
                    out = spec (in.A, in.B)
                    spec a = if a == (0b0, zero) then [Some 0]
                              | a == (0b1, zero) then [Some 1]
                             else repeat None

  spec_shr8 : {A: [1], B: [2]} -> {Y: [3](Option Bit)}
  spec_shr8 in = {Y = out}
                 where
                   out = spec (in.A, in.B)
                   spec a = if a == (0b0, 0b00) then [Some 0, Some 0, Some 0]
                             | a == (0b0, 0b01) then [Some 0, Some 0, Some 0]
                             | a == (0b0, 0b10) then [Some 0, Some 0, Some 0]
                             | a == (0b0, 0b11) then [Some 0, Some 0, Some 0]
                             | a == (0b1, 0b00) then [Some 1, Some 1, Some 1]
                             | a == (0b1, 0b01) then [Some 0, Some 1, Some 1]
                             | a == (0b1, 0b10) then [Some 0, Some 0, Some 1]
                             | a == (0b1, 0b11) then [Some 0, Some 0, Some 0]
                            else repeat None

  spec_sshr9 : {A: [2], B: [1]} -> {Y: [2](Option Bit)}
  spec_sshr9 in = {Y = out}
                  where
                    out = spec (in.A, in.B)
                    spec a = if a == (0b00, 0b0) then [Some 0, Some 0]
                              | a == (0b00, 0b1) then [Some 0, Some 0]
                              | a == (0b01, 0b0) then [Some 0, Some 1]
                              | a == (0b01, 0b1) then [Some 0, Some 0]
                              | a == (0b10, 0b0) then [Some 1, Some 0]
                              | a == (0b10, 0b1) then [Some 1, Some 1]
                              | a == (0b11, 0b0) then [Some 1, Some 1]
                              | a == (0b11, 0b1) then [Some 1, Some 1]
                             else repeat None

  spec_shiftx5 : {A: [2], B: [2]} -> {Y: [2](Option Bit)}
  spec_shiftx5 in = {Y = out}
                    where
                      out = spec (in.A, in.B)
                      spec a = if a == (0b00, 0b00) then [Some 0, Some 0]
                                | a == (0b00, 0b01) then [None, Some 0]
                                | a == (0b00, 0b10) then [None, None]
                                | a == (0b00, 0b11) then [None, None]
                                | a == (0b01, 0b00) then [Some 0, Some 1]
                                | a == (0b01, 0b01) then [None, Some 0]
                                | a == (0b01, 0b10) then [None, None]
                                | a == (0b01, 0b11) then [None, None]
                                | a == (0b10, 0b00) then [Some 1, Some 0]
                                | a == (0b10, 0b01) then [None, Some 1]
                                | a == (0b10, 0b10) then [None, None]
                                | a == (0b10, 0b11) then [None, None]
                                | a == (0b11, 0b00) then [Some 1, Some 1]
                                | a == (0b11, 0b01) then [None, Some 1]
                                | a == (0b11, 0b10) then [None, None]
                                | a == (0b11, 0b11) then [None, None]
                               else repeat None

  spec_pmux : {A: [0], B: [0], S: [2]} -> {Y: [0](Option Bit)}
  spec_pmux in = {Y = out}
                 where
                   out = spec (in.A, in.B, in.S)
                   spec a = if a == (zero, zero, 0b00) then []
                             | a == (zero, zero, 0b01) then []
                             | a == (zero, zero, 0b10) then []
                             | a == (zero, zero, 0b11) then []
                            else repeat None

  spec_pmux2 : {A: [1], B: [2], S: [2]} -> {Y: [1](Option Bit)}
  spec_pmux2 in = {Y = out}
                  where
                    out = spec (in.A, in.B, in.S)
                    spec a = if a == (0b0, 0b00, 0b00) then [Some 0]
                              | a == (0b0, 0b00, 0b01) then [Some 0]
                              | a == (0b0, 0b00, 0b10) then [Some 0]
                              | a == (0b0, 0b00, 0b11) then [Some 0]
                              | a == (0b0, 0b01, 0b00) then [Some 0]
                              | a == (0b0, 0b01, 0b01) then [Some 1]
                              | a == (0b0, 0b01, 0b10) then [Some 0]
                              | a == (0b0, 0b01, 0b11) then [None]
                              | a == (0b0, 0b10, 0b00) then [Some 0]
                              | a == (0b0, 0b10, 0b01) then [Some 0]
                              | a == (0b0, 0b10, 0b10) then [Some 1]
                              | a == (0b0, 0b10, 0b11) then [None]
                              | a == (0b0, 0b11, 0b00) then [Some 0]
                              | a == (0b0, 0b11, 0b01) then [Some 1]
                              | a == (0b0, 0b11, 0b10) then [Some 1]
                              | a == (0b0, 0b11, 0b11) then [Some 1]
                              | a == (0b1, 0b00, 0b00) then [Some 1]
                              | a == (0b1, 0b00, 0b01) then [Some 0]
                              | a == (0b1, 0b00, 0b10) then [Some 0]
                              | a == (0b1, 0b00, 0b11) then [Some 0]
                              | a == (0b1, 0b01, 0b00) then [Some 1]
                              | a == (0b1, 0b01, 0b01) then [Some 1]
                              | a == (0b1, 0b01, 0b10) then [Some 0]
                              | a == (0b1, 0b01, 0b11) then [None]
                              | a == (0b1, 0b10, 0b00) then [Some 1]
                              | a == (0b1, 0b10, 0b01) then [Some 0]
                              | a == (0b1, 0b10, 0b10) then [Some 1]
                              | a == (0b1, 0b10, 0b11) then [None]
                              | a == (0b1, 0b11, 0b00) then [Some 1]
                              | a == (0b1, 0b11, 0b01) then [Some 1]
                              | a == (0b1, 0b11, 0b10) then [Some 1]
                              | a == (0b1, 0b11, 0b11) then [Some 1]
                             else repeat None

  spec_check : {A: [1], EN: [1], TRG: [1], ARGS: [1]} -> {}
  spec_check in = {}

}};
prove_print w4 {{ spec_ne ===> m.ne }};
prove_print w4 {{ spec_div ===> m.div }};
prove_print w4 {{ spec_add1 ===> m.add1 }};
prove_print w4 {{ spec_nex1 ===> m.nex1 }};
prove_print w4 {{ spec_mod1 ===> m.mod1 }};
prove_print w4 {{ spec_and2 ===> m.and2 }};
prove_print w4 {{ spec_or2 ===> m.or2 }};
prove_print w4 {{ spec_ge2 ===> m.ge2 }};
prove_print w4 {{ spec_eq3 ===> m.eq3 }};
prove_print w4 {{ spec_sub3 ===> m.sub3 }};
prove_print w4 {{ spec_gt3 ===> m.gt3 }};
prove_print w4 {{ spec_eqx4 ===> m.eqx4 }};
prove_print w4 {{ spec_xnor4 ===> m.xnor4 }};
prove_print w4 {{ spec_le4 ===> m.le4 }};
prove_print w4 {{ spec_mul5 ===> m.mul5 }};
prove_print w4 {{ spec_xor5 ===> m.xor5 }};
prove_print w4 {{ spec_lt5 ===> m.lt5 }};
prove_print w4 {{ spec_ne6 ===> m.ne6 }};
prove_print w4 {{ spec_div6 ===> m.div6 }};
prove_print w4 {{ spec_logic_and ===> m.logic_and }};
prove_print w4 {{ spec_logic_and2 ===> m.logic_and2 }};
prove_print w4 {{ spec_logic_and4 ===> m.logic_and4 }};
prove_print w4 {{ spec_logic_and6 ===> m.logic_and6 }};
prove_print w4 {{ spec_pos ===> m.pos }};
prove_print w4 {{ spec_logic_not1 ===> m.logic_not1 }};
prove_print w4 {{ spec_reduce_or1 ===> m.reduce_or1 }};
prove_print w4 {{ spec_pos2 ===> m.pos2 }};
prove_print w4 {{ spec_logic_not3 ===> m.logic_not3 }};
prove_print w4 {{ spec_reduce_or3 ===> m.reduce_or3 }};
prove_print w4 {{ spec_pos4 ===> m.pos4 }};
prove_print w4 {{ spec_logic_not5 ===> m.logic_not5 }};
prove_print w4 {{ spec_reduce_or5 ===> m.reduce_or5 }};
prove_print w4 {{ spec_pos6 ===> m.pos6 }};
prove_print w4 {{ spec_logic_not7 ===> m.logic_not7 }};
prove_print w4 {{ spec_reduce_or7 ===> m.reduce_or7 }};
prove_print w4 {{ spec_sshr ===> m.sshr }};
prove_print w4 {{ spec_shr2 ===> m.shr2 }};
prove_print w4 {{ spec_sshr3 ===> m.sshr3 }};
prove_print w4 {{ spec_shr5 ===> m.shr5 }};
prove_print w4 {{ spec_sshr6 ===> m.sshr6 }};
prove_print w4 {{ spec_shr8 ===> m.shr8 }};
prove_print w4 {{ spec_sshr9 ===> m.sshr9 }};
prove_print w4 {{ spec_shiftx5 ===> m.shiftx5 }};
prove_print w4 {{ spec_pmux ===> m.pmux }};
prove_print w4 {{ spec_pmux2 ===> m.pmux2 }};
prove_print w4 {{ spec_check === m.check }};